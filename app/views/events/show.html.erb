<h2><%= @event.name %></h2>
<p>Created by: <%= @event.creator.email %></p>
<p>Date: <%= @event.date %></p>
<p><%= @event.description %></p>
<p><%= label_tag :invite_only %><%= check_box_tag :invite_only, 'test', @event.invite_only, disabled: true %></p>
<% if @event.event_attendees.attending_users.any? %>
  <h3>Attendees:</h3>
  <ul>
    <% @event.event_attendees.attending_users.each do |event_attendee| %>
      <li><%= event_attendee.user.email %> - <%= link_to "Show User", user_url(event_attendee.user) %>
        <% if current_user == event_attendee.user || current_user == @event.creator %>
          - <%= link_to "Remove", event_event_attendee_url(event_id: @event.id, id: event_attendee.user.id), data: {turbo_method: :delete} %>
        <% end %>
      </li>
    <% end %>
  </ul>
<% end %>
<% if user_signed_in? && @event.event_attendees.attending_users.none? { |attending_user| attending_user.user == current_user } %>
  <%= link_to "Attend Event", event_event_attendee_url(event_id: @event.id, id: current_user.id, event_attendee: { status: 'Attending'} ), data: { turbo_method: :patch } %>
<% end%>
<% if current_user == @event.creator %>
  <%= link_to "Edit Event", edit_event_url(@event) %>
  <%= link_to "Delete Event", event_url(@event), data: { turbo_method: :delete } %>
<% end%>
